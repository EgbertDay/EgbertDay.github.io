<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>JSP | 代海峰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="servlet有三个缺点无法克服，首先，写在servlet的所有HTML的标签必须包含Java字符串，这使得处理HTTP响应报文的工作变得十分烦琐，第二，所有的文本和HTML标记都是硬编码，导致即使时表现层的微小变化，如改变颜色，也都需要重新编译，第三，可读性太差JSP技术解决了上面的问题，同时，JSP不会取代Servlet,相反。它们时互补性的，现代的java Web 应用会同时应用Servle">
<meta name="keywords" content="Servlet&amp;JSP">
<meta property="og:type" content="article">
<meta property="og:title" content="JSP">
<meta property="og:url" content="http://yoursite.com/2018/11/03/JSP/index.html">
<meta property="og:site_name" content="代海峰">
<meta property="og:description" content="servlet有三个缺点无法克服，首先，写在servlet的所有HTML的标签必须包含Java字符串，这使得处理HTTP响应报文的工作变得十分烦琐，第二，所有的文本和HTML标记都是硬编码，导致即使时表现层的微小变化，如改变颜色，也都需要重新编译，第三，可读性太差JSP技术解决了上面的问题，同时，JSP不会取代Servlet,相反。它们时互补性的，现代的java Web 应用会同时应用Servle">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-11-03T15:43:01.306Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JSP">
<meta name="twitter:description" content="servlet有三个缺点无法克服，首先，写在servlet的所有HTML的标签必须包含Java字符串，这使得处理HTTP响应报文的工作变得十分烦琐，第二，所有的文本和HTML标记都是硬编码，导致即使时表现层的微小变化，如改变颜色，也都需要重新编译，第三，可读性太差JSP技术解决了上面的问题，同时，JSP不会取代Servlet,相反。它们时互补性的，现代的java Web 应用会同时应用Servle">
  
    <link rel="alternate" href="/atom.xml" title="代海峰" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">代海峰</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">个人博客</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-JSP" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/03/JSP/" class="article-date">
  <time datetime="2018-11-03T04:33:33.000Z" itemprop="datePublished">2018-11-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/学习心得/">学习心得</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      JSP
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>servlet有三个缺点无法克服，首先，写在servlet的所有HTML的标签必须包含Java字符串，这使得处理HTTP响应报文的工作变得十分烦琐，第二，所有的文本和HTML标记都是硬编码，导致即使时表现层的微小变化，如改变颜色，也都需要重新编译，第三，可读性太差<br>JSP技术解决了上面的问题，同时，JSP不会取代Servlet,相反。它们时互补性的，现代的java Web 应用会同时应用Servlet和JSP页面技术</p>
<h2 id="JSP概述"><a href="#JSP概述" class="headerlink" title="JSP概述"></a>JSP概述</h2><p><strong>JSP页面本质上是一个Servlet</strong>,然而，用JSP页面开发比使用Servlet更容易，主要有三个原因，首先，<strong>不必编译JSP页面</strong>，其次，JSP页面是一个以.jsp的文本文件，使用任何编辑器都可以开发，第三，使用JSP页面技术更接近页面的真实展示面貌，可读性更强<br><strong>JSP页面需要在一个JSP容器中运行</strong>，一般来说，一个Servlet容器通常也是一个JSP容器，例如，Tomcat也可以称为Servlet/JSP容器</p>
<ul>
<li><strong>转换JSP页面到JSP页面实现类，</strong>该实现类是一个实现javax.servlet.jsp.JspPag接口或子接口javax.servlet.jsp.HttpJspPage,Jsp是Servlet的子接口，而HttpJspPage也是JspPage的子接口**，因此，生成的实现类也是一个Servlet，我们看一下着两个接口,该实现类是由Servlet/JSP容器生成，如果出现转换错误，则相关错误信息会发送到客户端<br>JspPage接口<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> javax.servlet.jsp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">JspPage</span> <span class="keyword">extends</span> <span class="title">javax</span>.<span class="title">servlet</span>.<span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">jspInit</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">jspDestroy</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>HttpJspPage接口<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> javax.servlet.jsp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">HttpJspPage</span> <span class="keyword">extends</span> <span class="title">javax</span>.<span class="title">servlet</span>.<span class="title">jsp</span>.<span class="title">JspPage</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">_jspService</span><span class="params">(javax.servlet.http.HttpServletRequest httpServletRequest, javax.servlet.http.HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> javax.servlet.ServletException, java.io.IOException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li><strong>如果转换成功，Servlet/JSP容器随后编译成Servlet类，并加载和实例化该类，像其他正常的servlet一样执行生命周期操作</strong></li>
</ul>
<p>对于同一个JSP页面的请求，Servlet/JSP容器首先会检查JSP页面是否被修改过，如果是，则该JSP页面会被重新编译，如果不是，则执行以及在内存中的JSP Servlet，这样一来，一个JSP页面的第一次调用的实际花费总比后来花费多，因为它涉及翻译和编译，为了解决这个问题，可以执行下面的动作之一</p>
<ul>
<li>配置应用程序，使所有的JSP页面在应用程序启动时被调用（实际上也可以视为翻译和编译），而不是第一次请求时调用</li>
<li>预编译JSP页面，并将其部署为Servlet<br>JSP自带的API包含4个包：</li>
<li>javax.servelt.jsp。包含用于Servlet/JSP容器将JSP页面翻译为Servlet的核心类和接口，其中两个重要的成员时JspPage和HttpJspPage接口，所有的JSP页面实现类必须实现JspPage和HttpJspPage接口，在HTTP环境下，实现HTTPJspPage是显而易见的</li>
<li>javax.servlet.jsp.tagext。包含用于开发自定义标签的类型</li>
<li>javax.el。提供了统一表达式语言的API</li>
<li>javax.servlet.jsp.el。提供了一组必须由Servlet/JSP容器支持，以便在JSP页面中使用表达式语言的类</li>
</ul>
<p>除了javax.servlet.jsp.tagext。我们很少直接使用JSP API。事实上，编写JSP页面时，我们更关系Servlet API,而非JSP API。开发JSP容器和JSP编译器时，JSP API已被广泛使用</p>
<p>JSP页面可以包含模版数据和语法元素，这里语法元素是一些有特殊意义的JSP转换符，比如&lt;% &lt;%!,除去语法元素之外的一切是模版数据，模版数据会原样的发送给客户端，例如，JSP页面中的HTML标记和文字都是模版数据</p>
<p>OK 现在让我们看下，一个简单的welcome.jsp的JSP页面是如何被翻译成名为welcome_jsp的Servlet<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;Welcome&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">welcome</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">welcome_jsp</span> <span class="keyword">extends</span> <span class="title">org</span>.<span class="title">apache</span>.<span class="title">jasper</span>.<span class="title">runtime</span>.<span class="title">HttpJspBase</span> <span class="keyword">implements</span> <span class="title">org</span>.<span class="title">apache</span>.<span class="title">jasper</span>.<span class="title">runtime</span>.<span class="title">JspSourceDependent</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> java.util.Map&lt;String,Long&gt; _jspx_dependants;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> javax.servlet.jsp.JspFactory _jspFactory=</span><br><span class="line">            javax.servlet.jsp.JspFactory.getDefaultFactory();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Long&gt; <span class="title">getDependants</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _jspx_dependants;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> javax.el.ExpressionFactory _el_expressionfactory;</span><br><span class="line">    <span class="keyword">private</span> org.apache.tomcat.InstanceManager _jsp_instanceManager;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">_jspInit</span><span class="params">()</span></span>&#123;</span><br><span class="line">        _el_expressionfactory=_jspFactory.getJspApplicationContext(</span><br><span class="line">                getServletConfig().getServletContext())</span><br><span class="line">                .getExpressionFactory();</span><br><span class="line">        _jsp_instanceManager=org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">_jspService</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> javax.servlet.jsp.PageContext pageContext;</span><br><span class="line">        javax.servlet.http.HttpSession session=<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">final</span> javax.servlet.ServletContext application;</span><br><span class="line">        <span class="keyword">final</span> javax.servlet.ServletConfig config;</span><br><span class="line">        javax.servlet.jsp.JspWriter out=<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">final</span> java.lang.Object page=<span class="keyword">this</span>;</span><br><span class="line">        javax.servlet.jsp.JspWriter _jsp_out=<span class="keyword">null</span>;</span><br><span class="line">        javax.servlet.jsp.PageContext _jspx_page_context=<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">           httpServletResponse.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">           pageContext=_jspFactory.getPageContext(<span class="keyword">this</span>,httpServletRequest,httpServletResponse,<span class="keyword">null</span>,<span class="keyword">true</span>,<span class="number">8192</span>,<span class="keyword">true</span>);</span><br><span class="line">           _jspx_page_context=pageContext;</span><br><span class="line">           application=pageContext.getServletContext();</span><br><span class="line">           config=pageContext.getServletConfig();</span><br><span class="line">           session=pageContext.getSession();</span><br><span class="line">           out=pageContext.getOut();</span><br><span class="line">           _jsp_out=out;</span><br><span class="line">           out.write(<span class="string">"&lt;html&gt;\n"</span>);</span><br><span class="line">           out.write(<span class="string">"&lt;head&gt;&lt;title&gt;Welcome&lt;/title&gt;&lt;/head&gt;\n"</span>);</span><br><span class="line">           out.write(<span class="string">"welcome\n"</span>);</span><br><span class="line">           out.write(<span class="string">"&lt;/body&gt;\n"</span>);</span><br><span class="line">           out.write(<span class="string">"&lt;/html&gt;"</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(java.lang.Throwable t)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!(t <span class="keyword">instanceof</span>  javax.servlet.jsp.SkipPageException))&#123;</span><br><span class="line">                out=_jsp_out;</span><br><span class="line">                <span class="keyword">if</span>(out!=<span class="keyword">null</span>&amp;&amp;out.getBufferSize()!=<span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        out.clearBuffer();</span><br><span class="line">                    &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(_jspx_page_context!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                    _jspx_page_context.handlePageException(t);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            _jspFactory.releasePageContext(_jspx_page_context);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>正如我们所看到的，JSP的主体方法时_jspService()方法,这个方法被定义在HttpJspPage,并被HttpJspBase的service方法所调用，下面是来自HttpJspBase类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req,HttpServletResponse res)</span><span class="keyword">throws</span> ServletException,IOException</span>&#123;</span><br><span class="line">  _jspService(req,res);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>我们可知当Servlet容器调用JSP编译的实现类的时候，调用service(),在service()内部调用了_jspService()方法，所有_jspService方法才是整个JSP实现类的主体，我们再看看下有Servlet/JSP容器生成的这个实现类，能看出其继承了HttpJspBase,我们再来看下这个类是什么<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  <span class="comment">// IntelliJ API Decompiler stub source generated from a class file</span></span><br><span class="line">  <span class="comment">// Implementation of methods is not available</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.apache.jasper.runtime;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpJspBase</span> <span class="keyword">extends</span> <span class="title">javax</span>.<span class="title">servlet</span>.<span class="title">http</span>.<span class="title">HttpServlet</span> <span class="keyword">implements</span> <span class="title">javax</span>.<span class="title">servlet</span>.<span class="title">jsp</span>.<span class="title">HttpJspPage</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="title">HttpJspBase</span><span class="params">()</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(javax.servlet.ServletConfig config)</span> <span class="keyword">throws</span> javax.servlet.ServletException </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> java.lang.<span class="function">String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response)</span> <span class="keyword">throws</span> javax.servlet.ServletException, java.io.IOException </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jspInit</span><span class="params">()</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">_jspInit</span><span class="params">()</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jspDestroy</span><span class="params">()</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">_jspDestroy</span><span class="params">()</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">_jspService</span><span class="params">(javax.servlet.http.HttpServletRequest httpServletRequest, javax.servlet.http.HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> javax.servlet.ServletException, java.io.IOException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>HtpJspBase继承了HttpServlet并实现了HttpJspPage,因此容器生成的JSP本质上也是一个Servlet<br>我们从_jspService()中也能得到隐式对象的概念，这些隐式对象也都是容器生成并在_jspService()中能够使用的<br>JSP页面和Servlet不同的另一方面是，前者不需要添加注解或者在部署描述符中配置映射URL，Servlet必须要通过在重启容器之后，通过容器的组件扫描完成映射，而JSP页面不需要，可以热部署，因为JSP页面的Servlet实现类是动态生成的，</p>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>JSP支持两种注释风格：</p>
<ol>
<li>JSP注释，该注释记录页面中做了什么<br>&lt;%–  –%&gt;</li>
<li>HTML/XHTML注释，这些注释将会发送到浏览器<!--  -->
<h2 id="隐式对象"><a href="#隐式对象" class="headerlink" title="隐式对象"></a>隐式对象</h2>Servlet容器会传递几个对象给它运行的Servlet对象，例如，可以通过Servlet的service()方法，拿到HttpServletRequest和HttpServletResponse对象，以及可以通过init方法访问到ServletConfig对象，此外，可以通过调用HttpServletRequest对象的getSession()方法拿到HttpSession对象<br>在JSP中，可以通过使用隐式对象来访问上述对象 下面是JSP的隐式对象</li>
</ol>
<table>
<thead>
<tr>
<th></th>
<th>对象</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>request</td>
<td>javax.servlet.http.HttpServletRequest</td>
</tr>
<tr>
<td>response</td>
<td>javax.servlet.http.HttpServletResponse</td>
</tr>
<tr>
<td>session</td>
<td>javvax.servlet.http.HttpSession</td>
</tr>
<tr>
<td>config</td>
<td>javax.servlet.ServletConfig</td>
</tr>
<tr>
<td>application</td>
<td>javax.servlet.ServletContext</td>
</tr>
<tr>
<td>pageContext</td>
<td>javax.servlet.jsp.PageContext</td>
</tr>
<tr>
<td>out</td>
<td>javax.servlet.jsp.Writer</td>
</tr>
<tr>
<td>page</td>
<td>javax.servlet.jsp.HttpJspBase</td>
</tr>
<tr>
<td>exception</td>
<td>java.lang.Throwable</td>
</tr>
</tbody>
</table>
<p>pageContext同于javax.servlet.jsp.PagContext。它提供了非常有用的上下文信息，并通过其自身说明的方法来访问各种Servlet相关对象，如getRequest(),getResposne(),getServletConfig(),getServletContext()和getSession(),当然这些方法在脚本中并不是很有用，因为可以直接使用隐式对象来访问request，response,session,application等，<br><strong>另外PageContext中提供了另一组有趣的方法，用于获取和设置属性的方法，即getAttribute方法和setAttribute()方法，属性值可被存储在四个范围之一，页面，请求，会话和应用程序</strong>，页面范围是最小范围，这里存储的属性只在一同一个JSP页面可用，请求访问是指当前的ServletRequestz中，会话范围指的是当前的HttpSession,应用程序范围指应用的ServletContext中<br>PageContext的setAttribute的方法签名如下：<br>    public abstract void setAttribute(String name,Object value,int scope);<br>scope的取值范围为PageContext对象的最终静态int值:PAGE_SCOPE,REQUEST_SCOPE,RESPONSE_SCOPE,SESSION_SCOPE,APPLICATION_SCOPE<br>如要直接保存一个属性到页面范围，可直接使用setAttribute的重载方法<br>    public abstract void setAttribute(String name,Object value);<br>我们可以简单的来看一下PageContext<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  <span class="comment">// IntelliJ API Decompiler stub source generated from a class file</span></span><br><span class="line">  <span class="comment">// Implementation of methods is not available</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> javax.servlet.jsp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">PageContext</span> <span class="keyword">extends</span> <span class="title">javax</span>.<span class="title">servlet</span>.<span class="title">jsp</span>.<span class="title">JspContext</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> PAGE_SCOPE = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> REQUEST_SCOPE = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SESSION_SCOPE = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> APPLICATION_SCOPE = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> java.lang.String PAGE = <span class="string">"javax.servlet.jsp.jspPage"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> java.lang.String PAGECONTEXT = <span class="string">"javax.servlet.jsp.jspPageContext"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> java.lang.String REQUEST = <span class="string">"javax.servlet.jsp.jspRequest"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> java.lang.String RESPONSE = <span class="string">"javax.servlet.jsp.jspResponse"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> java.lang.String CONFIG = <span class="string">"javax.servlet.jsp.jspConfig"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> java.lang.String SESSION = <span class="string">"javax.servlet.jsp.jspSession"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> java.lang.String OUT = <span class="string">"javax.servlet.jsp.jspOut"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> java.lang.String APPLICATION = <span class="string">"javax.servlet.jsp.jspApplication"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> java.lang.String EXCEPTION = <span class="string">"javax.servlet.jsp.jspException"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PageContext</span><span class="params">()</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(javax.servlet.Servlet servlet, javax.servlet.ServletRequest servletRequest, javax.servlet.ServletResponse servletResponse, java.lang.String s, <span class="keyword">boolean</span> b, <span class="keyword">int</span> i, <span class="keyword">boolean</span> b1)</span> <span class="keyword">throws</span> java.io.IOException, java.lang.IllegalStateException, java.lang.IllegalArgumentException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> javax.servlet.http.<span class="function">HttpSession <span class="title">getSession</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> java.lang.<span class="function">Object <span class="title">getPage</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> javax.servlet.<span class="function">ServletRequest <span class="title">getRequest</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> javax.servlet.<span class="function">ServletResponse <span class="title">getResponse</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> java.lang.<span class="function">Exception <span class="title">getException</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> javax.servlet.<span class="function">ServletConfig <span class="title">getServletConfig</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> javax.servlet.<span class="function">ServletContext <span class="title">getServletContext</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">forward</span><span class="params">(java.lang.String s)</span> <span class="keyword">throws</span> javax.servlet.ServletException, java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">include</span><span class="params">(java.lang.String s)</span> <span class="keyword">throws</span> javax.servlet.ServletException, java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">include</span><span class="params">(java.lang.String s, <span class="keyword">boolean</span> b)</span> <span class="keyword">throws</span> javax.servlet.ServletException, java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">handlePageException</span><span class="params">(java.lang.Exception e)</span> <span class="keyword">throws</span> javax.servlet.ServletException, java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">handlePageException</span><span class="params">(java.lang.Throwable throwable)</span> <span class="keyword">throws</span> javax.servlet.ServletException, java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> javax.servlet.jsp.tagext.<span class="function">BodyContent <span class="title">pushBody</span><span class="params">()</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> javax.servlet.jsp.<span class="function">ErrorData <span class="title">getErrorData</span><span class="params">()</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>PageContext继承JspContext,我们再来简单的看一下JspContext<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  <span class="comment">// IntelliJ API Decompiler stub source generated from a class file</span></span><br><span class="line">  <span class="comment">// Implementation of methods is not available</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> javax.servlet.jsp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">JspContext</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JspContext</span><span class="params">()</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">setAttribute</span><span class="params">(java.lang.String s, java.lang.Object o)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">setAttribute</span><span class="params">(java.lang.String s, java.lang.Object o, <span class="keyword">int</span> i)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> java.lang.<span class="function">Object <span class="title">getAttribute</span><span class="params">(java.lang.String s)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> java.lang.<span class="function">Object <span class="title">getAttribute</span><span class="params">(java.lang.String s, <span class="keyword">int</span> i)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> java.lang.<span class="function">Object <span class="title">findAttribute</span><span class="params">(java.lang.String s)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">removeAttribute</span><span class="params">(java.lang.String s)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">removeAttribute</span><span class="params">(java.lang.String s, <span class="keyword">int</span> i)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">getAttributesScope</span><span class="params">(java.lang.String s)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> java.util.Enumeration&lt;java.lang.String&gt; getAttributeNamesInScope(<span class="keyword">int</span> i);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> javax.servlet.jsp.<span class="function">JspWriter <span class="title">getOut</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@deprecated</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> javax.servlet.jsp.el.<span class="function">ExpressionEvaluator <span class="title">getExpressionEvaluator</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> javax.el.<span class="function">ELContext <span class="title">getELContext</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@deprecated</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> javax.servlet.jsp.el.<span class="function">VariableResolver <span class="title">getVariableResolver</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> javax.servlet.jsp.<span class="function">JspWriter <span class="title">pushBody</span><span class="params">(java.io.Writer writer)</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> javax.servlet.jsp.<span class="function">JspWriter <span class="title">popBody</span><span class="params">()</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>隐式对象out引用一个javax.servlet.jsp.Writer对象，这类似与调用HttpServletResponse的getWrite()方法得到的java.io.PrintWriter，可以通过调用它的print方法将消息发送到浏览器，例如<br>    out.println(“welcome”);</p>
<p>简单看一下JspWriter的代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  <span class="comment">// IntelliJ API Decompiler stub source generated from a class file</span></span><br><span class="line">  <span class="comment">// Implementation of methods is not available</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> javax.servlet.jsp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">JspWriter</span> <span class="keyword">extends</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Writer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NO_BUFFER = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_BUFFER = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> UNBOUNDED_BUFFER = -<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">int</span> bufferSize;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">boolean</span> autoFlush;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="title">JspWriter</span><span class="params">(<span class="keyword">int</span> bufferSize, <span class="keyword">boolean</span> autoFlush)</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">newLine</span><span class="params">()</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">boolean</span> b)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">char</span> c)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> i)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">long</span> l)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">float</span> v)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">double</span> v)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">char</span>[] chars)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(java.lang.String s)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(java.lang.Object o)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">println</span><span class="params">()</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">println</span><span class="params">(<span class="keyword">boolean</span> b)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">println</span><span class="params">(<span class="keyword">char</span> c)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">println</span><span class="params">(<span class="keyword">int</span> i)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">println</span><span class="params">(<span class="keyword">long</span> l)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">println</span><span class="params">(<span class="keyword">float</span> v)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">println</span><span class="params">(<span class="keyword">double</span> v)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">println</span><span class="params">(<span class="keyword">char</span>[] chars)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">println</span><span class="params">(java.lang.String s)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">println</span><span class="params">(java.lang.Object o)</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">clearBuffer</span><span class="params">()</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">flush</span><span class="params">()</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> java.io.IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBufferSize</span><span class="params">()</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">getRemaining</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAutoFlush</span><span class="params">()</span> </span>&#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>默认情况下，JSP编译器会将JSP页面的内容类型设为text/html,如果要使用不同的类型，则需要通过调用response.setContentType()或者使用页面指令<br>需要注意的是page隐式对象时表示当前JSP页面，jSP页面的设计者一般不需要考虑它</p>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><p>指令是JSP语法元素的第一种类型，它们指示JSP转换器如何编译JSP页面为Servlet，我们首先先来看下两个比较重要的指令，page和include</p>
<h3 id="page指令"><a href="#page指令" class="headerlink" title="page指令"></a>page指令</h3><p>可以是page指令来控制JSP转换当前JSP页面的某些方面，例如，可以告诉JSP用于转换隐式对象out的缓冲器的大小，内容类型，已经需要导入的java类型等等<br>page指令的语法<br>&lt;%@ page attribute1=value1 attribute2=value2…%&gt;<br>我们看下page指令的属性列表</p>
<table>
<thead>
<tr>
<th></th>
<th>属性</th>
<th>值和功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>import</td>
<td>定义一个或者多个本页面中将被导入和使用的java类型，或者使用通配符导入类包，也可以在导入多种类型，之间用“，”分隔，Jsp默认导入的包java.lang,java.servlet,java.servlet.http,java.servlet.jsp</td>
</tr>
<tr>
<td>session</td>
<td>值为True,本页面加入会话管理，值为False则想法，默认为True,访问该页面时，若当前不存在javax.servlet.httpSession实例，则创建一个</td>
</tr>
<tr>
<td>buffer</td>
<td>以KB为单位，定义隐式对象out的缓冲大小。必须以KB为后缀结尾，默认大小为8KB或者更大（取决于容器），该值为nano，这意味着没有缓冲，数据直接写入PrintWriter</td>
</tr>
<tr>
<td>autoFlush</td>
<td>默认为True，若值为True,则当输出缓冲满时会自写入输出流，而值为False,则仅当调用隐式对象的flush()方法时，才会写入输出流，因此，如缓冲溢出，则会抛出异常</td>
</tr>
<tr>
<td>isThreadSafe</td>
<td>定义该页面的线程安全级别，不推荐使用JSP参数，因为使用该参数后，会生成一些Servlet容器已过期的代码</td>
</tr>
<tr>
<td>info</td>
<td>返回调用容器生成的Servlet类的getServletInfo方法的结果</td>
</tr>
<tr>
<td>errorPage</td>
<td>定义到出错是用来处理错误的页面</td>
</tr>
<tr>
<td>isErrorPage</td>
<td>标识本页是一个错误处理页面</td>
</tr>
<tr>
<td>contentType</td>
<td>定义本页隐式对象response的内容类型，默认是“text/html”</td>
</tr>
<tr>
<td>PpageEncoding</td>
<td>定义本页的字符编码，默认是IOS-8859-9</td>
</tr>
<tr>
<td>isELIgnored</td>
<td>配置是否忽略EL表达式，EL是expression Language的缩写</td>
</tr>
<tr>
<td>language</td>
<td>定义本页面的脚本语言类型，默认是java,这在JSP2.2中是唯一的合法值（未来也不太可能添加其他的合法值了，因为推荐使用EL替代脚本）</td>
</tr>
<tr>
<td>extends</td>
<td>定义JSP实现类要继承的父类，这个属性的使用场景非常罕见，尽在特殊理由下使用</td>
</tr>
<tr>
<td>deferredSyntaxAllowdedAsLiteral</td>
<td>定义是否解析字符串中出现“{#”字符，默认是False,{#是一个表达式语言的起始符号</td>
</tr>
<tr>
<td>trimDirectiveWhitespace</td>
<td>定义是否不输出多余的空格/空行。默认是False</td>
</tr>
</tbody>
</table>
<p>大部分page指令可以出现在页面的任何位置，但当page指令包含contentType或pageEncoding属性时，其必须出现在java代码发送任何内容之前，因为内容类型和字符编码必须在发送任何内容前设定<br>page指令也可以出现多次，但是出现多次的page指令的属性值必须具有相同的值，不过import属性除外，多个包含import属性的page指令的结果是累加的，<br>&lt;%@ page import=”java.util.ArrayList”%&gt;<br>&lt;%@ page import=”java.util.Date”%&gt;<br>和下面的写法等效<br>&lt;%@ page import=”java.util.ArrayList,java.util.Date”%&gt;<br>一个page指令可以拥有多个属性<br>&lt;%@ page session=”false” buffer=”16kb”%&gt;</p>
<h3 id="include指令"><a href="#include指令" class="headerlink" title="include指令"></a>include指令</h3><p>可以使用include指令将其他文件的内容包含到当前JSP页面，一个页面中可以有多个include指令，若存在一个内容会在不同的页面中使用或一个页面不同位置使用的场景，则将该内容模块化到一个include文件非常有用<br>&lt;%@ include file=”url”%&gt;<br>url可以使用相对路径，也可以使用该文件在服务器上的绝对路径<br><strong>JSP转换器处理include指令时，将指令替换为指令所包含文件的内容</strong><br>include动作和include指令是有差别的，我们之后再讲</p>
<h2 id="脚本元素"><a href="#脚本元素" class="headerlink" title="脚本元素"></a>脚本元素</h2><p>一个脚本元素是java代码块，以&lt;%符号开始，以%&gt;符号结束</p>
<h3 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h3><p>每一个表达式都会被JSP容器执行，并使用隐式对象out的打印方法输出结果，表达式以&lt;%= %&gt;<br>Today is &lt;%=java.util.Calendar.getInstance().getTime()%&gt;<br>注意，表达式无须分号结尾</p>
<h3 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h3><p>可以声明能在JSP页面中使用的变量和方法，声明以“&lt;%!”开始，以“%&gt;”结束<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%!</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getTodayDate</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> java.util.Date().toString();</span><br><span class="line">  &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">Today is &lt;%=getTodayDate()%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>在JSP页面中，一个声明可以出现在任何地方，并且一个页面可以有多个声明<br>可以使用声明来重写JSP页面，实现类的init和destory方法，<strong>通过声明jspInit方法来重写init方法，通过重写jspDestory方法来重写destory方法</strong></p>
<h3 id="禁用脚本元素"><a href="#禁用脚本元素" class="headerlink" title="禁用脚本元素"></a>禁用脚本元素</h3><p>随着JSP2.0对表达式语言的加强，推荐的实践是：在JSP页面中用EL访问服务端对象而不写java代码，因此从JSP2.0之后，可以通过在部署描述符中的<jsp-property-group>定义一个scripting-invalid元素来禁用脚本元素<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp-property-group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scripting-invalid</span>&gt;</span>true<span class="tag">&lt;/<span class="name">scripting-invalid</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp-property-group</span>&gt;</span></span><br></pre></td></tr></table></figure></jsp-property-group></p>
<h2 id="动作"><a href="#动作" class="headerlink" title="动作"></a>动作</h2><p>动作是第三类型的语法元素，它们被转换成java代码来执行操作，如访问一个java对象或调用方法，下面仅讨论JSP容器支持的标准动作，除标准动作之外，还可以创建自定义标准动作来执行某些操作</p>
<h3 id="useBean"><a href="#useBean" class="headerlink" title="useBean"></a>useBean</h3><p>useBean将创建一个关联java对象的脚本变量，这是早期分离的表示层和业务逻辑的手段，随着其他技术的发展，如自定义标签和表达式语言，现在很少使用useBean方式<br>下面的代码示例，它创建一个java.util.Date实例，并赋值给名为today的脚本变量<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;useBean&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;jsp:useBean id=<span class="string">"today"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"java.util.Date"</span></span><br><span class="line">&lt;%=today%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>在Tomcat中，上述代码会被转换为如下的代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java.util.Date today=<span class="keyword">null</span>;</span><br><span class="line">     today=(java.util.Date)_jspx_page_context.getAttribute(<span class="string">"today"</span>, PageContext.REQUEST_SCOPE);</span><br><span class="line">     <span class="keyword">if</span>(today==<span class="keyword">null</span>)&#123;</span><br><span class="line">         today=<span class="keyword">new</span> java.util.Date();</span><br><span class="line">         _jspx_page_context.setAttribute(<span class="string">"today"</span>, PageContext.REQUEST_SCOPE);</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="setProperty和getProperty"><a href="#setProperty和getProperty" class="headerlink" title="setProperty和getProperty"></a>setProperty和getProperty</h3><p>setProperty动作可对一个java对象设置属性，而getProperty动作则会输出java对象的一个属性<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String firstName;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getFirstName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> firstName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFirstName</span><span class="params">(String firstName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.firstName = firstName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLastName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> lastName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLastName</span><span class="params">(String lastName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.lastName = lastName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>getSetPropertyTest.jsp页面<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;getProperty and setProperty&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;jsp:useBean id=<span class="string">"employee"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"Employee"</span>&gt;</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">"employee"</span> property=<span class="string">"firstName"</span> value=<span class="string">"Abigail"</span>/&gt;</span><br><span class="line">First Name:&lt;jsp:getProperty name=<span class="string">"employee"</span> property=<span class="string">"firstName"</span>/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="include"><a href="#include" class="headerlink" title="include"></a>include</h3><p>include动作用来动态地引入另一个资源，可以引入另一个JSP页面，也可以引入一个Servlet或一个静态的HTML页面<br>jspIncludeTest.jsp<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Include action&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;jsp:include page=<span class="string">"jspf/menu.jsp"</span>&gt;</span><br><span class="line">    &lt;jsp:param name=<span class="string">"text"</span> value=<span class="string">"How are you"</span>/&gt;</span><br><span class="line">&lt;/jsp:include&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>理解include指令和include动作非常重要，对于include指令，资源的引入发生在页面转换时，即当JSP容器将页面转换为生成的Servlet时，而对于include动作，资源引入发生在请求页面时，因此，使用include动作可以传递参数的，而include指令不支持<br>第二个不同是。include指令对引入的文件扩展名不做特殊要求，但对于include动作，如引入的文件需要以JSP页面处理，则文件扩展名必须是JSP，若使用.jspf为扩展名，则该页面被当作静态文件<br>两者还有一个最大的不同，include指令被引入的文件一旦被编译进JSP生成的Servlet类时，被引入的页面在做修改也不会对Servlet实现类有影响，但是对于使用include动作，因为被引入的JSP页面是在请求是被间接调用_jspService()方法，所以它的变动是动态影响着生成的Servlet实现类的</p>
<h3 id="forward"><a href="#forward" class="headerlink" title="forward"></a>forward</h3><p>forword将当前页面转向到其他资源，下面代码将当前页面转向到login.js页面<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:forward page=<span class="string">"jspf/menu.jsp"</span>&gt;</span><br><span class="line">    &lt;jsp:param name=<span class="string">"text"</span> value=<span class="string">"Please Login"</span>/&gt;</span><br><span class="line">&lt;/jsp:forward&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><p>JSP提供了很好的错误处理能力，除了在java代码中可以使用try语句，还可以指定一个特殊页面，当应用遇到未捕获的异常时，用户将会看到一个精心设计的页面解释发生了什么，而不是一个用户无法理解的错误信息<br>使用page指令的isErrorPage属性（属性值必须为True）来标识一个JSP页面是错误页面<br>下面展示了一个错误处理程序<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page isErrorPage=<span class="string">"true"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Error&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">An error occurred.&lt;br&gt;</span><br><span class="line">Error Message:</span><br><span class="line">&lt;%=exception.getMessage()%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>其他需要放置未捕获的异常的页面使用page指令的errorPage属性来指向错误处理页面，如下：<br>    &lt;%@ page errorPage=”errorHandler.jsp” %&gt;<br>如果运行页面的Servlet实现类抛出一个未未被捕获的异常，那么这个异常将会向上抛给容器，容器通过页面声明的错误处理页面将异常传递给它使用这个错误处理页面来处理异常，其实主要是给用户更加好的使用体验而已</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/03/JSP/" data-id="cjo1m2qkl000on8rzofdku5k9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Servlet-JSP/">Servlet&JSP</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2018/11/02/会话管理/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">会话管理</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/学习心得/">学习心得</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML5/">HTML5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/">JVM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/">Maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oracle/">Oracle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Servlet-JSP/">Servlet&JSP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-MVC/">Spring MVC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-boot/">Spring boot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-cloud/">Spring cloud</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/HTML5/" style="font-size: 10px;">HTML5</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Maven/" style="font-size: 10px;">Maven</a> <a href="/tags/Node-js/" style="font-size: 10px;">Node.js</a> <a href="/tags/Oracle/" style="font-size: 10px;">Oracle</a> <a href="/tags/Servlet-JSP/" style="font-size: 15px;">Servlet&JSP</a> <a href="/tags/Spring/" style="font-size: 10px;">Spring</a> <a href="/tags/Spring-MVC/" style="font-size: 10px;">Spring MVC</a> <a href="/tags/Spring-boot/" style="font-size: 10px;">Spring boot</a> <a href="/tags/Spring-cloud/" style="font-size: 10px;">Spring cloud</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/11/03/JSP/">JSP</a>
          </li>
        
          <li>
            <a href="/2018/11/02/会话管理/">会话管理</a>
          </li>
        
          <li>
            <a href="/2018/11/02/Servlets/">Servlets</a>
          </li>
        
          <li>
            <a href="/2018/10/27/并发/">并发</a>
          </li>
        
          <li>
            <a href="/2018/10/19/注解/">注解</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 EgbertDay<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>